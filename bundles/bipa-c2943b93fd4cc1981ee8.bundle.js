webpackJsonpYMK([38],{

/***/ 2591:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = {
  container: {
    width: '100%',
    height: '100vh',
    backgroundColor: 'rgba(0,0,0,0.5)',
    backgroundSize: '100%',
    backgroundRepeat: 'no-repeat',
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'center',
    zIndex: 10000,
    position: 'absolute',
    top: 0,
    left: 0
  },
  content: {
    position: 'absolute',
    backgroundColor: '#fff',
    borderRadius: '4px',
    boxSizing: 'border-box',
    margin: 'auto'
  },
  title: {
    textAlign: 'center',
    color: '#000',
    lineHeight: '24px',
    fontSize: '20px',
    fontWeight: 500
  },
  image: {
    width: '30px',
    height: '30px'
  },
  desc: {
    fontSize: '16px',
    lineHeight: '20px',
    color: '#000',
    textAlign: 'center'
  },
  desc1: {
    fontSize: '16px',
    lineHeight: '20px',
    color: '#000',
    whiteSpace: 'pre-wrap'
  },
  checkboxContainer: {
    display: 'flex'
  },
  moreinfo: {
    fontSize: '16px',
    lineHeight: '20px',
    color: '#000'
  },
  agreeLabel: {
    display: 'flex',
    alignItems: 'flex-start',
    justifyContent: 'center'
  },
  agreeCheckbox: {
    width: '20px',
    height: '20px',
    cursor: 'pointer',
    marginRight: '10px'
  },
  buttons: {
    textAlign: 'center',
    display: 'flex',
    flexFlow: 'column',
    alignItems: 'center'
  },
  button: {
    fontSize: '15px',
    fontWeight: 500,
    backgroundColor: '#212529',
    border: '1px solid #212529',
    color: '#fff',
    borderRadius: '4px',
    padding: '5px 20px',
    cursor: 'pointer',
    outline: 0,
    lineHeight: '30px',
    height: '40px',
    display: 'block',
    width: '56%'
  },
  closeButton: {
    position: 'absolute',
    cursor: 'pointer',
    padding: '1px',
    border: 'none',
    background: 'transparent'
  }
};
module.exports = exports['default'];

/***/ }),

/***/ 2592:
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABdUExURUdwTDExMTAwMDIyMhEREQYGBjIyMhYWFgwMDA0NDTExMTIyMiwsLB8fHywsLC0tLTExMTMzM////5mZmUxMTPLy8ubm5oyMjHt7e0BAQFlZWcbGxtnZ2bOzs7Kyst2WIMsAAAARdFJOUwDJeOUNEt0BGQaVvzsmUGGqR6pfbwAAAjxJREFUWMO1l+GaqiAQhgUR0ECFarXd2vu/zANoLiAg2HO+fxnf28wwjFRVQaEedgALJXwZIUNVkRC8CE8XSLPtbOdeGYx8YjfZ9IcImrBrdTSNgLU4EB4SBNSJDHVtBEEQEFkCPEygWGQKhwgk368ITYAARIHAvg6dKNKukoMoFHQIRQVYVHOH0IliAWQBenFCvRUCPgMA6E0gzPtquoUtt8kNYUvCO4GT/AoSbl/SIYBmCYFQf+EzSFD+58N5wtcQoL/08SPv3/7D77v8eXjdhNpQBloveZ/dJ/NdvnYzbskBhfK9SjffWcrrftWSAxMRwjX2adNgdhKKQ0LEL6DJYYw0yrS5lH8OLhkbnUN0Dqu6/YYrug0WqgHxPjY7F9zTP4DayES76955RvrSiOoiiDQh5f//gLwUPihibQAgsY2v9DYCA4jNw9lupCl8YzCAD1q5U4DYRM06TL3pxNhxnsMHwznOBpA9UH4DNTSA0yMN0vBIesSHqvuY0fBQzB7rawb7oZb7YlkzqBIzJfl+pu8MYnP1QMOWgXo5nQhhtAJQN7S6OAFmBVARAouvODoA64pBSi9Z9G8L1hiKrnlY+a0KGEKDCwvgXfQI4fgTv0bwzCww9wuwqm3zrvs8+PsmhnY47Ica0qhfx8DHg7sdS/l1DCgVBOhp2q8JLerBafsaRMPgjgFU7bT90L8gUMP77gJMNhiPcDDuPLtpqlYzGmrJuFtCcv/+LgwFWYTK3G+GgrxFSt0252DBP+mbxyXYi6IpAAAAAElFTkSuQmCC"

/***/ }),

/***/ 2612:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = {
  container: {
    width: '100%',
    height: '100vh',
    backgroundColor: 'rgba(0,0,0,0.5)',
    backgroundSize: '100%',
    backgroundRepeat: 'no-repeat',
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'center',
    zIndex: 10000,
    position: 'absolute',
    top: 0,
    left: 0
  },
  content: {
    backgroundColor: '#fff',
    borderRadius: '4px',
    boxSizing: 'border-box',
    padding: '34px 30px 28px',
    margin: 'auto',
    '@media screen and (max-height: 350px)': {
      padding: '22px 22px 18px',
      width: '380px'
    }
  },
  title: {
    textAlign: 'center',
    color: '#000',
    lineHeight: '24px',
    fontSize: '20px',
    margin: '0 0 27px',
    fontWeight: 500,
    '@media screen and (max-height: 350px)': {
      margin: '0 8px 16px'
    }
  },
  check: {
    width: '30px',
    height: '30px',
    marginRight: '9px'
  },
  image: {
    width: '30px',
    height: '30px'
  },
  desc: {
    fontSize: '16px',
    lineHeight: '20px',
    color: '#000',
    textAlign: 'center'
  },
  desc1: {
    fontSize: '16px',
    lineHeight: '20px',
    color: '#000',
    marginBottom: '20px',
    '@media screen and (max-height: 350px)': {
      marginBottom: '14px'
    },
    whiteSpace: 'pre-wrap'
  },
  checkboxContainer: {
    display: 'flex'
  },
  moreinfo: {
    fontSize: '16px',
    lineHeight: '20px',
    color: '#000'
  },
  agreeLabel: {
    display: 'flex',
    alignItems: 'flex-start',
    justifyContent: 'center'
  },
  agreeCheckbox: {
    width: '20px',
    height: '20px',
    cursor: 'pointer',
    marginRight: '10px'
  },
  buttons: {
    marginTop: '20px',
    textAlign: 'center',
    display: 'flex',
    flexFlow: 'column',
    alignItems: 'center',
    '@media screen and (max-height: 350px)': {
      marginTop: '16px'
    }
  },
  button: {
    fontSize: '15px',
    fontWeight: 500,
    backgroundColor: '#212529',
    border: '1px solid #212529',
    color: '#fff',
    borderRadius: '4px',
    padding: '5px 20px',
    cursor: 'pointer',
    outline: 0,
    lineHeight: '30px',
    height: '40px',
    display: 'block',
    width: '56%'
  },
  closeButton: {
    position: 'absolute',
    top: '10px',
    right: '10px',
    width: '30px',
    height: '30px',
    cursor: 'pointer',
    padding: '1px',
    border: 'none',
    background: 'transparent',
    '@media screen and (max-height: 350px)': {
      top: '13px',
      right: '8px',
      width: '28px',
      height: '28px'
    }
  }
};
module.exports = exports['default'];

/***/ }),

/***/ 3538:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = BIPA;

var _react = __webpack_require__(459);

var _react2 = _interopRequireDefault(_react);

var _Consent = __webpack_require__(3539);

var _Consent2 = _interopRequireDefault(_Consent);

var _Denied = __webpack_require__(3540);

var _Denied2 = _interopRequireDefault(_Denied);

var _ymkWebSdkCore = __webpack_require__(112);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function BIPA(props) {
  var settings = props.settings;


  if (settings.features.bipa && settings.userBIPAConsent === _ymkWebSdkCore.consents.disagree) {
    return _react2.default.createElement(_Denied2.default, props);
  }
  return _react2.default.createElement(_Consent2.default, props);
}
module.exports = exports['default'];

/***/ }),

/***/ 3539:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends2 = __webpack_require__(11);

var _extends3 = _interopRequireDefault(_extends2);

var _regenerator = __webpack_require__(8);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = __webpack_require__(9);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _slicedToArray2 = __webpack_require__(72);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

exports.default = Consent;

var _react = __webpack_require__(459);

var _react2 = _interopRequireDefault(_react);

var _styles = __webpack_require__(2591);

var _styles2 = _interopRequireDefault(_styles);

var _uiUtils = __webpack_require__(565);

var _uiUtils2 = _interopRequireDefault(_uiUtils);

var _ymkWebSdkCore = __webpack_require__(112);

var _round2 = __webpack_require__(593);

var _round3 = _interopRequireDefault(_round2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function Consent(props) {
  var _this = this;

  var settings = props.settings,
      emitter = props.emitter;

  var _useState = (0, _react.useState)(true),
      _useState2 = (0, _slicedToArray3.default)(_useState, 2),
      show = _useState2[0],
      setShow = _useState2[1];

  var _useState3 = (0, _react.useState)(1.0),
      _useState4 = (0, _slicedToArray3.default)(_useState3, 2),
      scale = _useState4[0],
      setScale = _useState4[1];

  var _useState5 = (0, _react.useState)(false),
      _useState6 = (0, _slicedToArray3.default)(_useState5, 2),
      scaled = _useState6[0],
      setScaled = _useState6[1];

  var _useState7 = (0, _react.useState)(false),
      _useState8 = (0, _slicedToArray3.default)(_useState7, 2),
      agreed = _useState8[0],
      setAgreed = _useState8[1];

  var modalRef = (0, _react.useRef)(null);
  var FIRST_RENDER = (0, _react.useRef)(true);
  var lastShow = (0, _react.useRef)(true);
  var isShortScreen = settings.displayHeight <= 350;

  (0, _react.useEffect)(function () {
    FIRST_RENDER.current = false;
    setTimeout(function () {
      return resize();
    }, FIRST_RENDER.current ? 200 : 0);
    focusModal4A11y();
  }, []);

  (0, _react.useEffect)(function () {
    !lastShow.current && show && focusModal4A11y();
    lastShow.current = show;
  }, [show]);

  var focusModal4A11y = function focusModal4A11y() {
    if (!show) {
      return;
    }
    emitter.trigger(_ymkWebSdkCore.events.focusBoundUpdated, [modalRef.current]);
    modalRef.current && modalRef.current.focus();
  };

  var resize = function resize() {
    var h = modalRef.current.clientHeight;
    var dh = settings.displayHeight;
    if (h > dh * 0.96) {
      setScale((0, _round3.default)(dh * 0.96 / h, 2));
    }
    emitter.trigger(_ymkWebSdkCore.events.bipaConsentUIShowed);
    setScaled(true);
  };

  var handleConfirm = function handleConfirm() {
    setShow(false);
    emitter.trigger(_ymkWebSdkCore.events.bipaConsentUpdated, [_ymkWebSdkCore.consents.agree]);
  };

  var handleCancel = function () {
    var _ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee() {
      return _regenerator2.default.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              setShow(false);
              emitter.trigger(_ymkWebSdkCore.events.bipaConsentUpdated, [_ymkWebSdkCore.consents.disagree]);
              emitter.trigger(_ymkWebSdkCore.events.close);

            case 3:
            case 'end':
              return _context.stop();
          }
        }
      }, _callee, _this);
    }));

    return function handleCancel() {
      return _ref.apply(this, arguments);
    };
  }();

  var getMaxWidthOfContent = function getMaxWidthOfContent() {
    return settings.displayWidth <= 350 ? 'unset' : settings.displayWidth * 0.94 + 'px';
  };

  var getMarginRight = function getMarginRight() {
    return _ymkWebSdkCore.browserUtils.isIE() ? '30px' : '9px';
  };

  var getContainerStyle = function getContainerStyle() {
    return isShortScreen ? { width: '380px' } : {};
  };

  if (!show) {
    return _react2.default.createElement('div', null);
  }
  return _react2.default.createElement(
    'div',
    {
      style: (0, _extends3.default)({}, _styles2.default.container, _uiUtils2.default.getTemplateBackground(settings), getContainerStyle(), {
        height: '100vh',
        visibility: scaled ? 'visible' : 'hidden'
      })
    },
    _react2.default.createElement(
      'div',
      {
        ref: modalRef,
        role: 'dialog',
        'aria-modal': 'true',
        tabIndex: 0,
        autoFocus: true,
        'aria-label': settings.i18n.getMessage('a11y.modal.bipa.consents'),
        style: (0, _extends3.default)({}, _styles2.default.content, { maxWidth: getMaxWidthOfContent(), transform: 'scale(' + scale + ')', padding: isShortScreen ? '22px 22px 18px' : '34px 30px 28px' })
      },
      _react2.default.createElement(
        'h3',
        { id: 'bipa-title', tabIndex: 0, style: (0, _extends3.default)({}, _styles2.default.title, { margin: isShortScreen ? '0 8px 16px' : '0 0 27px' }) },
        settings.i18n.getMessage('bipa.title')
      ),
      _react2.default.createElement(
        'div',
        { id: 'bipa-desc', style: (0, _extends3.default)({}, _styles2.default.desc1, { marginBottom: isShortScreen ? '14px' : '20px' }) },
        settings.i18n.getMessage('bipa.desc')
      ),
      _react2.default.createElement(
        'div',
        { style: (0, _extends3.default)({}, _styles2.default.checkboxContainer) },
        _react2.default.createElement(
          'label',
          { htmlFor: 'YMK-bipa-agree', style: (0, _extends3.default)({}, _styles2.default.agreeLabel) },
          _react2.default.createElement('input', { id: 'YMK-bipa-agree', type: 'checkbox', checked: agreed, style: _styles2.default.agreeCheckbox, onChange: function onChange() {
              return setAgreed(function (ps) {
                return !ps;
              });
            } })
        ),
        settings.BIPAPrivacyPolicyURL ? _react2.default.createElement(
          'div',
          { id: 'bipa-more-info-with-link', style: (0, _extends3.default)({}, _styles2.default.moreinfo) },
          _react2.default.createElement('span', { dangerouslySetInnerHTML: { __html: settings.i18n.getMessageWithValues('bipa.desc.more.info.with.link', { url: settings.BIPAPrivacyPolicyURL }) } })
        ) : _react2.default.createElement(
          'div',
          { id: 'bipa-more-info', style: (0, _extends3.default)({}, _styles2.default.moreinfo) },
          settings.i18n.getMessage('bipa.desc.more.info')
        )
      ),
      _react2.default.createElement(
        'div',
        { style: (0, _extends3.default)({}, _styles2.default.buttons, { marginTop: isShortScreen ? '16px' : '20px' }) },
        _react2.default.createElement(
          'button',
          { id: 'bipa-confirm', type: 'button', disabled: !agreed, style: (0, _extends3.default)({}, _styles2.default.button, { opacity: agreed ? 1 : 0.5 }), onClick: handleConfirm },
          settings.i18n.getMessage('bipa.submit')
        )
      ),
      _react2.default.createElement(
        'button',
        {
          id: 'bipa-close',
          type: 'button',
          style: (0, _extends3.default)({}, _styles2.default.closeButton, {
            top: isShortScreen ? '13px' : '10px',
            right: isShortScreen ? '8px' : '10px',
            width: isShortScreen ? '28px' : '30px',
            height: isShortScreen ? '28px' : '30px'
          }),
          onClick: handleCancel
        },
        _react2.default.createElement('img', { alt: 'close', src: __webpack_require__(2592), style: { width: '100%' } })
      )
    )
  );
}
module.exports = exports['default'];

/***/ }),

/***/ 3540:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends2 = __webpack_require__(11);

var _extends3 = _interopRequireDefault(_extends2);

var _slicedToArray2 = __webpack_require__(72);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

exports.default = Denied;

var _react = __webpack_require__(459);

var _react2 = _interopRequireDefault(_react);

var _styles = __webpack_require__(2591);

var _styles2 = _interopRequireDefault(_styles);

var _uiUtils = __webpack_require__(565);

var _uiUtils2 = _interopRequireDefault(_uiUtils);

var _ymkWebSdkCore = __webpack_require__(112);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function Denied(props) {
  var settings = props.settings,
      emitter = props.emitter;

  var _useState = (0, _react.useState)(true),
      _useState2 = (0, _slicedToArray3.default)(_useState, 2),
      show = _useState2[0],
      setShow = _useState2[1];

  var _useState3 = (0, _react.useState)(1.0),
      _useState4 = (0, _slicedToArray3.default)(_useState3, 2),
      scale = _useState4[0],
      setScale = _useState4[1];

  var _useState5 = (0, _react.useState)(false),
      _useState6 = (0, _slicedToArray3.default)(_useState5, 2),
      scaled = _useState6[0],
      setScaled = _useState6[1];

  var modalRef = (0, _react.useRef)(null);
  var lastShow = (0, _react.useRef)(true);
  var isShortScreen = window.innerHeight <= 350;

  (0, _react.useEffect)(function () {
    focusModal4A11y();
    setTimeout(function () {
      return resize();
    });
    return function () {
      show && focusPage4A11y();
    };
  });

  (0, _react.useEffect)(function () {
    !lastShow.current && show && focusModal4A11y();
    lastShow.current && !show && focusPage4A11y();
    lastShow.current = show;
  }, [show]);

  var focusModal4A11y = function focusModal4A11y() {
    if (!show) {
      return;
    }
    emitter.trigger(_ymkWebSdkCore.events.focusBoundUpdated, [modalRef.current]);
    modalRef.current && modalRef.current.focus();
  };

  var focusPage4A11y = function focusPage4A11y() {
    return emitter.trigger(_ymkWebSdkCore.events.pageUpdated);
  };

  var resize = function resize() {
    emitter.trigger(_ymkWebSdkCore.events.bipaDisagreeUIShowed);
    var h = modalRef.current.clientHeight;
    var dh = settings.displayHeight;
    if (h > dh * 0.9) {
      setScale(dh * 0.9 / h);
    }
    emitter.trigger(_ymkWebSdkCore.events.bipaConsentUIShowed);
    setScaled(true);
  };

  var handleClose = function handleClose() {
    setShow(false);
    emitter.trigger(_ymkWebSdkCore.events.close);
  };

  if (!show) {
    return _react2.default.createElement('div', null);
  }
  return _react2.default.createElement(
    'div',
    {
      style: (0, _extends3.default)({}, _styles2.default.container, _uiUtils2.default.getTemplateBackground(settings), {
        height: '100vh',
        visibility: scaled ? 'visible' : 'hidden'
      })
    },
    _react2.default.createElement(
      'div',
      {
        ref: modalRef,
        role: 'dialog',
        'aria-modal': 'true',
        tabIndex: 0,
        autoFocus: true,
        'aria-label': settings.i18n.getMessage('a11y.modal.bipa.permission.required'),
        style: (0, _extends3.default)({}, _styles2.default.content, { width: '60%', transform: 'scale(' + scale + ')', padding: isShortScreen ? '22px 22px 18px' : '34px 30px 28px' })
      },
      _react2.default.createElement(
        'h3',
        { tabIndex: 0, style: (0, _extends3.default)({}, _styles2.default.desc) },
        settings.i18n.getMessage('bipa.denied.desc')
      ),
      _react2.default.createElement(
        'div',
        { style: (0, _extends3.default)({}, _styles2.default.buttons, { marginTop: isShortScreen ? '16px' : '20px' }) },
        _react2.default.createElement(
          'button',
          { id: 'bipa-denied-close', type: 'button', style: (0, _extends3.default)({}, _styles2.default.button), onClick: handleClose },
          settings.i18n.getMessage('bipa.close')
        )
      )
    )
  );
}
module.exports = exports['default'];

/***/ }),

/***/ 3679:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _getPrototypeOf = __webpack_require__(40);

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = __webpack_require__(0);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(466);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(38);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(39);

var _inherits3 = _interopRequireDefault(_inherits2);

var _class;

var _react = __webpack_require__(459);

var _react2 = _interopRequireDefault(_react);

var _radium = __webpack_require__(671);

var _radium2 = _interopRequireDefault(_radium);

var _Consent = __webpack_require__(3680);

var _Consent2 = _interopRequireDefault(_Consent);

var _Denied = __webpack_require__(3682);

var _Denied2 = _interopRequireDefault(_Denied);

var _settings = __webpack_require__(114);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var BIPA = (0, _radium2.default)(_class = function (_Component) {
  (0, _inherits3.default)(BIPA, _Component);

  function BIPA() {
    (0, _classCallCheck3.default)(this, BIPA);
    return (0, _possibleConstructorReturn3.default)(this, (BIPA.__proto__ || (0, _getPrototypeOf2.default)(BIPA)).apply(this, arguments));
  }

  (0, _createClass3.default)(BIPA, [{
    key: 'render',
    value: function render() {
      var settings = this.props.settings;


      if (settings.features.bipa && settings.userBIPAConsent === _settings.consents.disagree) {
        return _react2.default.createElement(_Denied2.default, this.props);
      }
      return _react2.default.createElement(_Consent2.default, this.props);
    }
  }]);
  return BIPA;
}(_react.Component)) || _class;

exports.default = BIPA;
module.exports = exports['default'];

/***/ }),

/***/ 3680:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _regenerator = __webpack_require__(8);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = __webpack_require__(9);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _extends2 = __webpack_require__(11);

var _extends3 = _interopRequireDefault(_extends2);

var _getPrototypeOf = __webpack_require__(40);

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = __webpack_require__(0);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(466);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(38);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(39);

var _inherits3 = _interopRequireDefault(_inherits2);

var _class;

var _react = __webpack_require__(459);

var _react2 = _interopRequireDefault(_react);

var _radium = __webpack_require__(671);

var _radium2 = _interopRequireDefault(_radium);

var _styleRoot = __webpack_require__(2015);

var _styleRoot2 = _interopRequireDefault(_styleRoot);

var _styles = __webpack_require__(2612);

var _styles2 = _interopRequireDefault(_styles);

var _utils = __webpack_require__(552);

var _utils2 = _interopRequireDefault(_utils);

var _ymkWebSdkCore = __webpack_require__(112);

var _settings = __webpack_require__(114);

var _round2 = __webpack_require__(593);

var _round3 = _interopRequireDefault(_round2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var initialState = {
  show: true,
  scale: 1.0,
  scaled: false,
  agreed: false
};
var FIRST_RENDER = true;

var Consent = (0, _radium2.default)(_class = function (_Component) {
  (0, _inherits3.default)(Consent, _Component);

  function Consent(props) {
    var _this2 = this;

    (0, _classCallCheck3.default)(this, Consent);

    var _this = (0, _possibleConstructorReturn3.default)(this, (Consent.__proto__ || (0, _getPrototypeOf2.default)(Consent)).call(this, props));

    _this.focusModal4A11y = function () {
      if (!_this.state.show) {
        return;
      }
      _this.props.emitter.trigger(_ymkWebSdkCore.events.focusBoundUpdated, [_this.modalRef]);
      _this.modalRef && _this.modalRef.focus();
    };

    _this.setShow = function (show) {
      return _this.setState(function (ps) {
        return (0, _extends3.default)({}, ps, { show: show });
      });
    };

    _this.setScale = function (scale) {
      return _this.setState(function (ps) {
        return (0, _extends3.default)({}, ps, { scale: scale });
      });
    };

    _this.setScaled = function (scaled) {
      return _this.setState(function (ps) {
        return (0, _extends3.default)({}, ps, { scaled: scaled });
      });
    };

    _this.resize = function () {
      var h = _this.modalRef.clientHeight;
      var dh = _this.props.settings.displayHeight;
      if (h > dh * 0.96) {
        _this.setScale((0, _round3.default)(dh * 0.96 / h, 2));
      }
      _this.props.emitter.trigger(_ymkWebSdkCore.events.bipaConsentUIShowed);
      _this.setScaled(true);
    };

    _this.handleConfirm = function () {
      _this.setShow(false);
      _this.props.emitter.trigger(_ymkWebSdkCore.events.bipaConsentUpdated, [_settings.consents.agree]);
    };

    _this.handleCancel = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee() {
      return _regenerator2.default.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _this.setShow(false);
              _this.props.emitter.trigger(_ymkWebSdkCore.events.bipaConsentUpdated, [_settings.consents.disagree]);
              _this.props.emitter.trigger(_ymkWebSdkCore.events.close);

            case 3:
            case 'end':
              return _context.stop();
          }
        }
      }, _callee, _this2);
    }));

    _this.getMaxWidthOfContent = function () {
      return _this.props.settings.displayWidth <= 350 ? 'unset' : _this.props.settings.displayWidth * 0.94 + 'px';
    };

    _this.getMarginRight = function () {
      return _ymkWebSdkCore.browserUtils.isIE() ? '30px' : '9px';
    };

    _this.state = initialState;
    _this.modalRef = null;
    setTimeout(function () {
      return _this.resize();
    }, FIRST_RENDER ? 200 : 0);
    FIRST_RENDER = false;
    return _this;
  }

  (0, _createClass3.default)(Consent, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      this.focusModal4A11y();
    }
  }, {
    key: 'componentDidUpdate',
    value: function componentDidUpdate(prevState) {
      !prevState.show && this.state.show && this.focusModal4A11y();
    }
  }, {
    key: 'render',
    value: function render() {
      var _this3 = this;

      var settings = this.props.settings;
      var _state = this.state,
          scale = _state.scale,
          scaled = _state.scaled,
          agreed = _state.agreed;

      if (!this.state.show) {
        return _react2.default.createElement('div', null);
      }
      return _react2.default.createElement(
        'div',
        {
          style: (0, _extends3.default)({}, _styles2.default.container, _utils2.default.getTemplateBackground(settings), {
            height: '100vh',
            visibility: scaled ? 'visible' : 'hidden'
          })
        },
        _react2.default.createElement(
          _styleRoot2.default,
          null,
          _react2.default.createElement(
            'div',
            {
              ref: function ref(r) {
                return _this3.modalRef = r;
              },
              role: 'dialog',
              'aria-modal': 'true',
              tabIndex: 0,
              autoFocus: true,
              'aria-label': settings.i18n.getMessage('a11y.modal.bipa.consents'),
              style: (0, _extends3.default)({}, _styles2.default.content, { maxWidth: this.getMaxWidthOfContent(), transform: 'scale(' + scale + ')' })
            },
            _react2.default.createElement(
              'h3',
              { tabIndex: 0, style: (0, _extends3.default)({}, _styles2.default.title, { fontFamily: settings.i18n.getFontFamily() }) },
              settings.i18n.getMessage('bipa.title')
            ),
            _react2.default.createElement(
              'div',
              { style: (0, _extends3.default)({}, _styles2.default.desc1, { fontFamily: settings.i18n.getFontFamily() }) },
              settings.i18n.getMessage('bipa.desc')
            ),
            _react2.default.createElement(
              'div',
              { style: (0, _extends3.default)({}, _styles2.default.checkboxContainer) },
              _react2.default.createElement(
                'label',
                { htmlFor: 'YMK-bipa-agree', style: (0, _extends3.default)({}, _styles2.default.agreeLabel, { fontFamily: settings.i18n.getFontFamily() }) },
                _react2.default.createElement('input', { id: 'YMK-bipa-agree', type: 'checkbox', defaultValue: agreed, style: _styles2.default.agreeCheckbox, onChange: function onChange() {
                    return _this3.setState(function (ps) {
                      return (0, _extends3.default)({}, ps, { agreed: !agreed });
                    });
                  } })
              ),
              settings.BIPAPrivacyPolicyURL ? _react2.default.createElement(
                'div',
                { style: (0, _extends3.default)({}, _styles2.default.moreinfo, { fontFamily: settings.i18n.getFontFamily() }) },
                _react2.default.createElement('span', { dangerouslySetInnerHTML: { __html: settings.i18n.getMessageWithValues('bipa.desc.more.info.with.link', { url: settings.BIPAPrivacyPolicyURL }) } })
              ) : _react2.default.createElement(
                'div',
                { style: (0, _extends3.default)({}, _styles2.default.moreinfo, { fontFamily: settings.i18n.getFontFamily() }) },
                settings.i18n.getMessage('bipa.desc.more.info')
              )
            ),
            _react2.default.createElement(
              'div',
              { style: _styles2.default.buttons },
              _react2.default.createElement(
                'button',
                { type: 'button', disabled: !agreed, style: (0, _extends3.default)({}, _styles2.default.button, { fontFamily: settings.i18n.getFontFamily(), opacity: agreed ? 1 : 0.5 }), onClick: this.handleConfirm },
                settings.i18n.getMessage('bipa.submit')
              )
            ),
            _react2.default.createElement(
              'button',
              { type: 'button', style: _styles2.default.closeButton, onClick: this.handleCancel },
              _react2.default.createElement('img', { alt: 'close', src: __webpack_require__(2592), style: { width: '100%' } })
            )
          )
        )
      );
    }
  }]);
  return Consent;
}(_react.Component)) || _class;

exports.default = Consent;
module.exports = exports['default'];

/***/ }),

/***/ 3682:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _extends2 = __webpack_require__(11);

var _extends3 = _interopRequireDefault(_extends2);

var _getPrototypeOf = __webpack_require__(40);

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = __webpack_require__(0);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(466);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(38);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(39);

var _inherits3 = _interopRequireDefault(_inherits2);

var _class;

var _react = __webpack_require__(459);

var _react2 = _interopRequireDefault(_react);

var _radium = __webpack_require__(671);

var _radium2 = _interopRequireDefault(_radium);

var _styles = __webpack_require__(2612);

var _styles2 = _interopRequireDefault(_styles);

var _utils = __webpack_require__(552);

var _utils2 = _interopRequireDefault(_utils);

var _ymkWebSdkCore = __webpack_require__(112);

var _styleRoot = __webpack_require__(2015);

var _styleRoot2 = _interopRequireDefault(_styleRoot);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var initialState = {
  show: true,
  scale: 1.0,
  scaled: false
};

var Denied = (0, _radium2.default)(_class = function (_Component) {
  (0, _inherits3.default)(Denied, _Component);

  function Denied(props) {
    (0, _classCallCheck3.default)(this, Denied);

    var _this = (0, _possibleConstructorReturn3.default)(this, (Denied.__proto__ || (0, _getPrototypeOf2.default)(Denied)).call(this, props));

    _this.focusModal4A11y = function () {
      if (!_this.state.show) {
        return;
      }
      _this.props.emitter.trigger(_ymkWebSdkCore.events.focusBoundUpdated, [_this.modalRef]);
      _this.modalRef && _this.modalRef.focus();
    };

    _this.focusPage4A11y = function () {
      return _this.props.emitter.trigger(_ymkWebSdkCore.events.pageUpdated);
    };

    _this.setShow = function (show) {
      return _this.setState(function (ps) {
        return (0, _extends3.default)({}, ps, { show: show });
      });
    };

    _this.setScale = function (scale) {
      return _this.setState(function (ps) {
        return (0, _extends3.default)({}, ps, { scale: scale });
      });
    };

    _this.setScaled = function (scaled) {
      return _this.setState(function (ps) {
        return (0, _extends3.default)({}, ps, { scaled: scaled });
      });
    };

    _this.resize = function () {
      _this.props.emitter.trigger(_ymkWebSdkCore.events.bipaDisagreeUIShowed);
      var h = _this.modalRef.clientHeight;
      var dh = _this.props.settings.displayHeight;
      if (h > dh * 0.9) {
        _this.setScale(dh * 0.9 / h);
      }
      _this.props.emitter.trigger(_ymkWebSdkCore.events.bipaConsentUIShowed);
      _this.setScaled(true);
    };

    _this.handleClose = function () {
      _this.setShow(false);
      _this.props.emitter.trigger(_ymkWebSdkCore.events.close);
    };

    _this.state = initialState;
    _this.modalRef = null;
    setTimeout(function () {
      return _this.resize();
    });
    return _this;
  }

  (0, _createClass3.default)(Denied, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      this.focusModal4A11y();
    }
  }, {
    key: 'componentDidUpdate',
    value: function componentDidUpdate(prevState) {
      !prevState.show && this.state.show && this.focusModal4A11y();
      prevState.show && !this.state.show && this.focusPage4A11y();
    }
  }, {
    key: 'componentWillUnmount',
    value: function componentWillUnmount() {
      this.state.show && this.focusPage4A11y();
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      var settings = this.props.settings;
      var _state = this.state,
          scale = _state.scale,
          scaled = _state.scaled;

      if (!this.state.show) {
        return _react2.default.createElement('div', null);
      }
      return _react2.default.createElement(
        'div',
        {
          style: (0, _extends3.default)({}, _styles2.default.container, _utils2.default.getTemplateBackground(settings), {
            height: '100vh',
            visibility: scaled ? 'visible' : 'hidden'
          })
        },
        _react2.default.createElement(
          _styleRoot2.default,
          null,
          _react2.default.createElement(
            'div',
            {
              ref: function ref(r) {
                return _this2.modalRef = r;
              },
              role: 'dialog',
              'aria-modal': 'true',
              tabIndex: 0,
              autoFocus: true,
              'aria-label': settings.i18n.getMessage('a11y.modal.bipa.permission.required'),
              style: (0, _extends3.default)({}, _styles2.default.content, { width: '60%', transform: 'scale(' + scale + ')' })
            },
            _react2.default.createElement(
              'h3',
              { tabIndex: 0, style: (0, _extends3.default)({}, _styles2.default.desc, { fontFamily: settings.i18n.getFontFamily() }) },
              settings.i18n.getMessage('bipa.denied.desc')
            ),
            _react2.default.createElement(
              'div',
              { style: _styles2.default.buttons },
              _react2.default.createElement(
                'button',
                { type: 'button', ref: function ref(r) {
                    return _this2.closeBtnRef = r;
                  }, style: (0, _extends3.default)({}, _styles2.default.button, { fontFamily: settings.i18n.getFontFamily() }), onClick: this.handleClose },
                settings.i18n.getMessage('bipa.close')
              )
            )
          )
        )
      );
    }
  }]);
  return Denied;
}(_react.Component)) || _class;

exports.default = Denied;
module.exports = exports['default'];

/***/ })

});